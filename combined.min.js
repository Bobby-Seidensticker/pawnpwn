namespace.lookup("com.pageforest.pawnpwn.about").define(function(f){function o(){typeof applicationCache!="undefined"&&(applicationCache.status==applicationCache.UPDATEREADY?(applicationCache.swapCache(),location.reload()):applicationCache.addEventListener("updateready",o,!1))}f.onReady=function(){o();if(location.hash){$(document.body).addClass("saved");var d="mailto:?subject="+encodeURIComponent("Let's Play Pawn Pwn")+"&body="+j+encodeURIComponent(location.hash);$("#mail-link").attr("href",d);d=
j+location.hash;$("#url-link").attr("href",d);$("#url-link").text(d)}};var j="http://pawnpwn.pageforest.com/"});namespace.lookup("com.pageforest.graph").defineOnce(function(f){function o(h){this.canvas=h;this.ctx=h.getContext("2d");this.size=j.getSize(h);this.numPoints=20;this.pointMultiple=this.maxHeight=10;this.heightMultiple=5;this.margin=[0,0];this.colors=["#FFF","#000"];this.axisColor="#9e9e9e";this.lineWidth=3;this.lineCap=this.lineJoin="round"}var j=namespace.lookup("org.startpad.dom"),d=namespace.lookup("org.startpad.vector");o.methods({calcScale:function(h){var d,f;for(d=0;d<h.length;d++){var j=h[d];
if(j.length>this.numPoints)this.numPoints=this.roundMult(j.length,this.pointMultiple);for(f=0;f<j.length;f++)if(j[f][1]+2>this.maxHeight)this.maxHeight=j[f][1]+2;this.maxHeight=this.roundMult(this.maxHeight,this.heightMultiple)}this.scale=[this.size[0]/this.numPoints,this.size[1]/this.maxHeight]},ptScaled:function(h){h=d.mult(this.scale,h);d.addTo(h,this.margin);h[1]=this.size[1]-h[1];return h},moveTo:function(h){h=this.ptScaled(h);this.ctx.moveTo(h[0],h[1])},lineTo:function(h){h=this.ptScaled(h);
this.ctx.lineTo(h[0],h[1])},draw:function(h,d,f,j,m){if(d)this.calcScale(h),this.ctx.clearRect(0,0,this.size[0],this.size[1]);else{this.ctx.lineWidth=this.lineWidth;this.ctx.lineJoin=this.lineJoin;this.ctx.lineCap=this.lineCap;if(m)this.ctx.lineWidth=m;if(j)this.ctx.lineCap=j;for(d=0;d<h.length;d++){m=h[d];this.ctx.beginPath();this.moveTo(m[0]);for(j=1;j<m.length;j++)this.lineTo(m[j]);this.ctx.strokeStyle=f?f[d]:this.colors[d];this.ctx.stroke()}this.ctx.fillStyle=this.axisColor;this.ctx.fillRect(0,
0,2,this.canvas.height);this.ctx.fillRect(0,this.canvas.height-2,this.canvas.width,2)}},roundMult:function(d,j){return Math.ceil(d/j)*j}});f.extend({GraphLines:o})});(function(){function f(a,c){var b;this.element=typeof a=="object"?a:document.getElementById(a);this.wrapper=this.element.parentNode;this.element.style.webkitTransitionProperty="-webkit-transform";this.element.style.webkitTransitionTimingFunction="cubic-bezier(0,0,0.25,1)";this.element.style.webkitTransitionDuration="0";this.element.style.webkitTransform=m+"0,0"+t;this.options={bounce:j,momentum:j,checkDOMChanges:!0,topOnDOMChanges:!1,hScrollbar:j,vScrollbar:j,fadeScrollbar:d||!h,shrinkScrollbar:d||
!h,desktopCompatibility:!1,overflow:"auto",snap:!1,bounceLock:!1,scrollbarColor:"rgba(0,0,0,0.5)",onScrollEnd:function(){}};if(typeof c=="object")for(b in c)this.options[b]=c[b];if(this.options.desktopCompatibility)this.options.overflow="hidden";this.onScrollEnd=this.options.onScrollEnd;delete this.options.onScrollEnd;this.wrapper.style.overflow=this.options.overflow;this.refresh();window.addEventListener("onorientationchange"in window?"orientationchange":"resize",this,!1);if(h||this.options.desktopCompatibility)this.element.addEventListener(y,
this,!1),this.element.addEventListener(I,this,!1),this.element.addEventListener(v,this,!1);this.options.checkDOMChanges&&this.element.addEventListener("DOMSubtreeModified",this,!1)}function o(a,c,T,e,d){var h=document;this.dir=a;this.fade=T;this.shrink=e;this.uid=++b;this.bar=h.createElement("div");this.bar.style.cssText="position:absolute;top:0;left:0;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);pointer-events:none;-webkit-transition-duration:0;-webkit-transition-delay:0;-webkit-transition-property:-webkit-transform;z-index:10;background:"+
d+";-webkit-transform:"+m+"0,0"+t+";"+(a=="horizontal"?"-webkit-border-radius:3px 2px;min-width:6px;min-height:5px":"-webkit-border-radius:2px 3px;min-width:5px;min-height:6px");this.wrapper=h.createElement("div");this.wrapper.style.cssText="-webkit-mask:-webkit-canvas(scrollbar"+this.uid+this.dir+");position:absolute;z-index:10;pointer-events:none;overflow:hidden;opacity:0;-webkit-transition-duration:"+(T?"300ms":"0")+";-webkit-transition-delay:0;-webkit-transition-property:opacity;"+(this.dir==
"horizontal"?"bottom:2px;left:2px;right:7px;height:5px":"top:2px;right:2px;bottom:7px;width:5px;");this.wrapper.appendChild(this.bar);c.appendChild(this.wrapper)}f.prototype={x:0,y:0,enabled:!0,handleEvent:function(a){switch(a.type){case y:this.touchStart(a);break;case I:this.touchMove(a);break;case v:this.touchEnd(a);break;case "webkitTransitionEnd":this.transitionEnd();break;case "orientationchange":case "resize":this.refresh();break;case "DOMSubtreeModified":this.onDOMModified(a)}},onDOMModified:function(a){var c=
this;a.target.parentNode==c.element&&(setTimeout(function(){c.refresh()},0),c.options.topOnDOMChanges&&(c.x!=0||c.y!=0)&&c.scrollTo(0,0,"0"))},refresh:function(){var a=this.x,c=this.y;this.scrollWidth=this.wrapper.clientWidth;this.scrollHeight=this.wrapper.clientHeight;this.scrollerWidth=this.element.offsetWidth;this.scrollerHeight=this.element.offsetHeight;this.maxScrollX=this.scrollWidth-this.scrollerWidth;this.maxScrollY=this.scrollHeight-this.scrollerHeight;this.directionY=this.directionX=0;if(this.scrollX)if(this.maxScrollX>=
0)a=0;else if(this.x<this.maxScrollX)a=this.maxScrollX;if(this.scrollY)if(this.maxScrollY>=0)c=0;else if(this.y<this.maxScrollY)c=this.maxScrollY;if(this.options.snap)this.maxPageX=-Math.floor(this.maxScrollX/this.scrollWidth),this.maxPageY=-Math.floor(this.maxScrollY/this.scrollHeight),c=this.snap(a,c),a=c.x,c=c.y;if(a!=this.x||c!=this.y)this.setTransitionTime("0"),this.setPosition(a,c,!0);this.scrollX=this.scrollerWidth>this.scrollWidth;this.scrollY=!this.options.bounceLock&&!this.scrollX||this.scrollerHeight>
this.scrollHeight;if(this.options.hScrollbar&&this.scrollX)this.scrollBarX=this.scrollBarX||new o("horizontal",this.wrapper,this.options.fadeScrollbar,this.options.shrinkScrollbar,this.options.scrollbarColor),this.scrollBarX.init(this.scrollWidth,this.scrollerWidth);else if(this.scrollBarX)this.scrollBarX=this.scrollBarX.remove();if(this.options.vScrollbar&&this.scrollY&&this.scrollerHeight>this.scrollHeight)this.scrollBarY=this.scrollBarY||new o("vertical",this.wrapper,this.options.fadeScrollbar,
this.options.shrinkScrollbar,this.options.scrollbarColor),this.scrollBarY.init(this.scrollHeight,this.scrollerHeight);else if(this.scrollBarY)this.scrollBarY=this.scrollBarY.remove()},setPosition:function(a,c,b){this.x=a;this.y=c;this.element.style.webkitTransform=m+this.x+"px,"+this.y+"px"+t;b||(this.scrollBarX&&this.scrollBarX.setPosition(this.x),this.scrollBarY&&this.scrollBarY.setPosition(this.y))},setTransitionTime:function(a){a=a||"0";this.element.style.webkitTransitionDuration=a;if(this.scrollBarX)this.scrollBarX.bar.style.webkitTransitionDuration=
a,this.scrollBarX.wrapper.style.webkitTransitionDuration=j&&this.options.fadeScrollbar?"300ms":"0";if(this.scrollBarY)this.scrollBarY.bar.style.webkitTransitionDuration=a,this.scrollBarY.wrapper.style.webkitTransitionDuration=j&&this.options.fadeScrollbar?"300ms":"0"},touchStart:function(a){var c;if(this.enabled){a.preventDefault();a.stopPropagation();this.scrolling=!0;this.moved=!1;this.distY=this.distX=0;this.setTransitionTime("0");if(this.options.momentum||this.options.snap)if(c=new WebKitCSSMatrix(window.getComputedStyle(this.element).webkitTransform),
c.e!=this.x||c.f!=this.y)document.removeEventListener("webkitTransitionEnd",this,!1),this.setPosition(c.e,c.f),this.moved=!0;this.touchStartX=h?a.changedTouches[0].pageX:a.pageX;this.scrollStartX=this.x;this.touchStartY=h?a.changedTouches[0].pageY:a.pageY;this.scrollStartY=this.y;this.scrollStartTime=a.timeStamp;this.directionY=this.directionX=0}},touchMove:function(a){if(this.scrolling){var c=h?a.changedTouches[0].pageX:a.pageX,b=h?a.changedTouches[0].pageY:a.pageY,e=this.scrollX?c-this.touchStartX:
0,d=this.scrollY?b-this.touchStartY:0,j=this.x+e,f=this.y+d;a.stopPropagation();this.touchStartX=c;this.touchStartY=b;if(j>=0||j<this.maxScrollX)j=this.options.bounce?Math.round(this.x+e/3):j>=0||this.maxScrollX>=0?0:this.maxScrollX;if(f>=0||f<this.maxScrollY)f=this.options.bounce?Math.round(this.y+d/3):f>=0||this.maxScrollY>=0?0:this.maxScrollY;if(this.distX+this.distY>5){if(this.distX-3>this.distY)f=this.y,d=0;else if(this.distY-3>this.distX)j=this.x,e=0;this.setPosition(j,f);this.moved=!0;this.directionX=
e>0?-1:1;this.directionY=d>0?-1:1}else this.distX+=Math.abs(e),this.distY+=Math.abs(d)}},touchEnd:function(a){if(this.scrolling){var c=a.timeStamp-this.scrollStartTime,b=h?a.changedTouches[0]:a,e,d;e=0;d=this.x;var j=this.y;this.scrolling=!1;if(this.moved)if(!this.options.snap&&c>250)this.resetPosition();else{this.options.momentum&&(a=this.scrollX===!0?this.momentum(this.x-this.scrollStartX,c,this.options.bounce?-this.x+this.scrollWidth/5:-this.x,this.options.bounce?this.x+this.scrollerWidth-this.scrollWidth+
this.scrollWidth/5:this.x+this.scrollerWidth-this.scrollWidth):{dist:0,time:0},b=this.scrollY===!0?this.momentum(this.y-this.scrollStartY,c,this.options.bounce?-this.y+this.scrollHeight/5:-this.y,this.options.bounce?(this.maxScrollY<0?this.y+this.scrollerHeight-this.scrollHeight:0)+this.scrollHeight/5:this.y+this.scrollerHeight-this.scrollHeight):{dist:0,time:0},e=Math.max(Math.max(a.time,b.time),1),d=this.x+a.dist,j=this.y+b.dist);if(this.options.snap)a=this.snap(d,j),d=a.x,j=a.y,e=Math.max(a.time,
e);this.scrollTo(d,j,e+"ms")}else if(this.resetPosition(),h){for(e=b.target;e.nodeType!=1;)e=e.parentNode;d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,a.view,1,b.screenX,b.screenY,b.clientX,b.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);d._fake=!0;e.dispatchEvent(d)}}},transitionEnd:function(){document.removeEventListener("webkitTransitionEnd",this,!1);this.resetPosition()},resetPosition:function(){var a=this.x,c=this.y;if(this.x>=0)a=0;else if(this.x<this.maxScrollX)a=
this.maxScrollX;if(this.y>=0||this.maxScrollY>0)c=0;else if(this.y<this.maxScrollY)c=this.maxScrollY;if(a!=this.x||c!=this.y)this.scrollTo(a,c);else{if(this.moved)this.onScrollEnd(),this.moved=!1;this.scrollBarX&&this.scrollBarX.hide();this.scrollBarY&&this.scrollBarY.hide()}},snap:function(a,c){a=this.directionX>0?Math.floor(a/this.scrollWidth):this.directionX<0?Math.ceil(a/this.scrollWidth):Math.round(a/this.scrollWidth);this.pageX=-a;a*=this.scrollWidth;if(a>0)a=this.pageX=0;else if(a<this.maxScrollX)this.pageX=
this.maxPageX,a=this.maxScrollX;c=this.directionY>0?Math.floor(c/this.scrollHeight):this.directionY<0?Math.ceil(c/this.scrollHeight):Math.round(c/this.scrollHeight);this.pageY=-c;c*=this.scrollHeight;if(c>0)c=this.pageY=0;else if(c<this.maxScrollY)this.pageY=this.maxPageY,c=this.maxScrollY;return{x:a,y:c,time:Math.round(Math.max(Math.abs(this.x-a)/this.scrollWidth*500,Math.abs(this.y-c)/this.scrollHeight*500))}},scrollTo:function(a,c,b){this.x==a&&this.y==c?this.resetPosition():(this.moved=!0,this.setTransitionTime(b||
"350ms"),this.setPosition(a,c),b==="0"||b=="0s"||b=="0ms"?this.resetPosition():document.addEventListener("webkitTransitionEnd",this,!1))},scrollToPage:function(a,c,b){if(!this.options.snap)this.pageX=-Math.round(this.x/this.scrollWidth),this.pageY=-Math.round(this.y/this.scrollHeight);a=="next"?a=++this.pageX:a=="prev"&&(a=--this.pageX);c=="next"?c=++this.pageY:c=="prev"&&(c=--this.pageY);a=-a*this.scrollWidth;c=-c*this.scrollHeight;c=this.snap(a,c);a=c.x;c=c.y;this.scrollTo(a,c,b||"500ms")},scrollToElement:function(a,
c){if(a=typeof a=="object"?a:this.element.querySelector(a)){var b=this.scrollX?-a.offsetLeft:0,e=this.scrollY?-a.offsetTop:0;if(b>=0)b=0;else if(b<this.maxScrollX)b=this.maxScrollX;if(e>=0)e=0;else if(e<this.maxScrollY)e=this.maxScrollY;this.scrollTo(b,e,c)}},momentum:function(a,c,b,e){c=Math.abs(a)/c*1E3;var d=c*c/2.5/1E3,j=0;a>0&&d>b?(c=c*b/d/2.5,d=b):a<0&&d>e&&(c=c*e/d/2.5,d=e);d*=a<0?-1:1;return{dist:Math.round(d),time:Math.round(c/1.2)}},destroy:function(a){window.removeEventListener("onorientationchange"in
window?"orientationchange":"resize",this,!1);this.element.removeEventListener(y,this,!1);this.element.removeEventListener(I,this,!1);this.element.removeEventListener(v,this,!1);document.removeEventListener("webkitTransitionEnd",this,!1);this.options.checkDOMChanges&&this.element.removeEventListener("DOMSubtreeModified",this,!1);if(this.scrollBarX)this.scrollBarX=this.scrollBarX.remove();if(this.scrollBarY)this.scrollBarY=this.scrollBarY.remove();a&&this.wrapper.parentNode.removeChild(this.wrapper);
return null}};o.prototype={init:function(a,c){var b=document,d=Math.PI;if(this.dir=="horizontal"){if(this.maxSize!=this.wrapper.offsetWidth)this.maxSize=this.wrapper.offsetWidth,b=b.getCSSCanvasContext("2d","scrollbar"+this.uid+this.dir,this.maxSize,5),b.fillStyle="rgb(0,0,0)",b.beginPath(),b.arc(2.5,2.5,2.5,d/2,-d/2,!1),b.lineTo(this.maxSize-2.5,0),b.arc(this.maxSize-2.5,2.5,2.5,-d/2,d/2,!1),b.closePath(),b.fill()}else if(this.maxSize!=this.wrapper.offsetHeight)this.maxSize=this.wrapper.offsetHeight,
b=b.getCSSCanvasContext("2d","scrollbar"+this.uid+this.dir,5,this.maxSize),b.fillStyle="rgb(0,0,0)",b.beginPath(),b.arc(2.5,2.5,2.5,d,0,!1),b.lineTo(5,this.maxSize-2.5),b.arc(2.5,this.maxSize-2.5,2.5,0,d,!1),b.closePath(),b.fill();this.size=Math.max(Math.round(this.maxSize*this.maxSize/c),6);this.maxScroll=this.maxSize-this.size;this.toWrapperProp=this.maxScroll/(a-c);this.bar.style[this.dir=="horizontal"?"width":"height"]=this.size+"px"},setPosition:function(a){this.wrapper.style.opacity!="1"&&this.show();
a=Math.round(this.toWrapperProp*a);a<0?(a=this.shrink?a+a*3:0,this.size+a<7&&(a=-this.size+6)):a>this.maxScroll&&(a=this.shrink?a+(a-this.maxScroll)*3:this.maxScroll,this.size+this.maxScroll-a<7&&(a=this.size+this.maxScroll-6));a=this.dir=="horizontal"?m+a+"px,0"+t:m+"0,"+a+"px"+t;this.bar.style.webkitTransform=a},show:function(){if(j)this.wrapper.style.webkitTransitionDelay="0";this.wrapper.style.opacity="1"},hide:function(){if(j)this.wrapper.style.webkitTransitionDelay="350ms";this.wrapper.style.opacity=
"0"},remove:function(){this.wrapper.parentNode.removeChild(this.wrapper);return null}};var j="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,d=/iphone|ipad/gi.test(navigator.appVersion),h="ontouchstart"in window,y=h?"touchstart":"mousedown",I=h?"touchmove":"mousemove",v=h?"touchend":"mouseup",m="translate"+(j?"3d(":"("),t=j?",0)":")",b=0;window.iScroll=f})();namespace.lookup("com.pageforest.move-controller").defineOnce(function(f){function o(d,j){this.ui=d;this.history=j}var j=namespace.lookup("org.startpad.base");o.methods({merge:function(d,h){var f=this,o,v,m=0;v=Math.min(this.history.list.length,d.list.length);if(this.history.pos<v)v=this.history.pos;for(o=0;o<v;o++)if(j.isEqual(this.history.list[o],d.list[o]))m=o+1;else break;console.log("longestPrefix: "+m+" this.history.pos: "+this.history.pos+" this.history.list.length: "+this.history.list.length+
" newHistory.pos: "+d.pos+" newHistory.list.length: "+d.list.length);this.ui.setMovePos(m,!0,function(){f.ui.appendMoves(d);f.ui.setMovePos(d.pos,!0,h)})}});f.extend({MoveController:o})});namespace.lookup("com.pageforest.pawnpwn").defineOnce(function(f){function o(b){var a,c;b===0&&(a=8,c=0);b===1&&(a=0,c=8);return{i:4,j:a,walls:10,score:8,goalRow:c}}function j(b){var a,c,d=!1;b.length===4?(b.charCodeAt(0)===I?d="v":b.charCodeAt(0)===v&&(d="h"),a=b.charCodeAt(2)-m,c=b.charCodeAt(3)-t):b.length===2&&(a=b.charCodeAt(0)-m,c=b.charCodeAt(1)-t);return{i:a,j:c,wall:d}}function d(b){var a="";b.wall&&(a=b.wall+"-");a+=String.fromCharCode(b.i+m,b.j+t);return a}function h(){this.rg=[];this.iOut=
this.iIn=0}function y(){this.walls={};this.players=[];this.history={pos:0,list:[]};this.memo={};this.track=[[1,0],[-1,0],[0,-1]]}namespace.lookup("com.pageforest.client");var I=118,v=104,m=97,t=49;h.methods({push:function(b){this.rg[this.iIn++]=b},pop:function(){if(this.iIn===this.iOut)return null;return this.rg[this.iOut++]},fEmpty:function(){return this.iIn===this.iOut}});y.methods({init:function(){this.vWalls=[];this.hWalls=[];var b,a;for(b=0;b<9;b++){this.vWalls[b]=[];this.hWalls[b]=[];for(a=
0;a<9;a++)this.vWalls[b][a]=!1,this.hWalls[b][a]=!1}this.players[0]=o(0);this.players[1]=o(1);this.history={pos:0,list:[]};this.buildTrack()},getState:function(){return{players:this.players,walls:this.walls,history:this.history}},setState:function(b){this.players=b.players;this.walls=b.walls;this.history=b.history},move:function(b,a,c){var d=this.history.pos%2,e;if(a)if(a[0]==="w"){if(d!==parseInt(a[1],10))throw Error("wall chosen from wrong side");for(e=0;e<this.history.pos;e++)if(this.history.list[e].from===
a)throw Error("wall already claimed");}else{if(e=j(a),d=this.players[d],d.i!==e.i||d.j!==e.j)throw Error("move given a 'from' that is not the previous position");}else throw Error("no 'from' var in qg.move call");e=j(b);if(!c&&!this.isValidMove(b))return!1;if(!c&&!this.historyCurrent())this.history.list=this.history.list.slice(0,this.history.pos);c=this.history.pos%2;e.wall?(this.walls[b]=!0,this.players[c].walls--,this.memo={}):(this.players[c].i=e.i,this.players[c].j=e.j);c=this.breadthFirstSearch();
for(e=0;e<2;e++)this.players[e].score=c[e];this.history.list[this.history.pos]={move:b,score:this.getScore(),from:a};this.history.pos++;this.buildTrack();return!0},buildTrack:function(){var b,a,c,h=this.history.pos%2;a=(this.history.pos+1)%2;c=this.players[h].i;h=this.players[h].j;b=this.players[a].i;var e=this.players[a].j;a=this.getReachableMoves(d({i:c,j:h,walls:!1}));b=a.indexOf(d({i:b,j:e,wall:!1}));b!==-1&&(a=a.concat(this.getReachableMoves(a[b])),delete a[b],delete a[a.indexOf(d({i:c,j:h,wall:!1}))]);
this.track=[];h=[];b=[];var f=this.players[this.history.pos%2];for(c=0;c<a.length;c++)a[c]!==void 0&&(e=j(a[c]),h[h.length]=[e.i-f.i,e.j-f.j],b[b.length]=Math.atan2(-h[h.length-1][1],h[h.length-1][0])-Math.PI/2,b[b.length-1]>=0&&(b[b.length-1]-=Math.PI*2));var o;for(a=0;a<b.length;a++){e=-99;for(c=0;c<b.length;c++)b[c]>e&&(e=b[c],o=c);b[o]=-100;this.track[a]=h[o]}},isValidMove:function(b){if(this.memo[b])return!0;if(this.memo[b]===!1)return!1;var a=j(b),c=["v","h"],h=[],e=[];h[0]=[0,0,0];e[0]=[1,
-1,0];h[1]=[1,-1,0];e[1]=[0,0,0];var f=this.history.pos%2,o=(this.history.pos+1)%2,m=this.players[f].i,z=this.players[f].j,t=this.players[o].i;o=this.players[o].j;if(a.wall===!1){a=this.getReachableMoves(d({i:m,j:z,walls:!1}));c=a.indexOf(d({i:t,j:o,wall:!1}));c!==-1&&(a=a.concat(this.getReachableMoves(a[c])),delete a[c],delete a[a.indexOf(d({i:m,j:z,wall:!1}))]);if(a.indexOf(b)!==-1)return!0;return!1}if(this.players[f].walls===0)return!1;for(m=0;m<2;m++)if(a.wall===c[m]){if(this.walls[d({i:a.i,j:a.j,
wall:c[(m+1)%2]})])return this.memo[b]=!1;for(z=0;z<3;z++)if(this.walls[d({i:a.i+h[m][z],j:a.j+e[m][z],wall:c[m]})])return this.memo[b]=!1;this.walls[b]=!0;return this.breadthFirstSearch()!==!1?(delete this.walls[b],this.memo[b]=!0):(delete this.walls[b],this.memo[b]=!1)}},getReachableMoves:function(b,a){var c=j(b),h=["h","v","h","v"],e=[[-1,0],[0,0],[-1,0],[-1,-1]],f=[[-1,-1],[-1,0],[0,0],[-1,0]],m=[0,1,0,-1],o=[-1,0,1,0],t,v,y=[],x;for(x=0;x<4;x++)t=c.i+m[x],v=c.j+o[x],t>8||t<0||v>8||v<0||!this.walls[d({i:c.i+
e[x][0],j:c.j+f[x][0],wall:h[x]})]&&!this.walls[d({i:c.i+e[x][1],j:c.j+f[x][1],wall:h[x]})]&&(y[y.length]=a==void 0?d({i:t,j:v,wall:!1}):x);return y},breadthFirstSearch:function(){var b,a,c,f,e,j,m=[100,100];for(a=0;a<2;a++){j={};b=d({i:this.players[a].i,j:this.players[a].j,wall:!1});c=new h;c.push([b,0]);for(j[b]=0;!c.fEmpty();){b=c.pop();e=this.getReachableMoves(b[0]);f=b[1];for(b=0;b<e.length;b++)j[e[b]]||j[e[b]]===0||(c.push([e[b],f+1]),j[e[b]]=f+1)}for(b=0;b<9;b++)c=d({i:b,j:this.players[a].goalRow,
wall:!1}),j[c]>=0&&j[c]<m[a]&&(m[a]=j[c])}if(m[0]==100||m[1]==100)return!1;return m},changeHistoryPos:function(b){var a,c,d;if(b===this.history.pos)return!1;if(b<this.history.pos){a=this.history.pos-b;for(c=0;c<a;c++)this.unMove()}if(b>this.history.pos){a=b-this.history.pos;for(c=0;c<a;c++)b=this.history.list[this.history.pos].move,d=this.history.list[this.history.pos].from,this.move(b,d,!0)}this.buildTrack();return this.history},unMove:function(){this.history.pos--;var b=this.history.list[this.history.pos],
a=j(b.move);b=j(b.from);var c=this.history.pos%2;a.wall?(delete this.walls[d(a)],this.players[c].walls++):(this.players[c].i=b.i,this.players[c].j=b.j,this.history.pos===0?(this.players[0].score=8,this.players[1].score=8):(this.players[0].score=this.history.list[this.history.pos-1].score[0],this.players[1].score=this.history.list[this.history.pos-1].score[1]))},historyCurrent:function(){return this.history.list.length===this.history.pos?!0:!1},getScore:function(){return[this.players[0].score,this.players[1].score]},
currentPlayer:function(){return this.history.pos%2},isGameOver:function(){var b=this.getScore();if(b[0]===0||b[1]===0)return!0;return!1}});f.extend({PawnPwnGame:y,encode:d,decode:j,newPlayer:o})});namespace.lookup("com.pageforest.pawnpwnUI").defineOnce(function(f){function o(){typeof applicationCache!="undefined"&&(applicationCache.status==applicationCache.UPDATEREADY?(applicationCache.swapCache(),location.reload()):applicationCache.addEventListener("updateready",o,!1))}function j(a,b,c,l,d){if(a>600&&b>700){if(b/(a-c)>s)return 5;if(a-b/s>c+d[0])return 2;return 1}if(b/a>s){if(b-l-a*s>120)return 4;return 3}a-=b/s;if(a<d[0])return 3;if(a>c+d[0])return 2;return 1}function d(){var a,b,c,l=[];a=
window.innerHeight;b=window.innerWidth;if(!(X[0]==b&&X[1]==a)){X=[b,a];var d,i=0;$("body").addClass("noAppBar");$("body").css("margin-top",0);b>525&&a>450&&(i=40,a-=35,$("body").removeClass("noAppBar"),$("body").css("margin-top","35px"));l=[];var e=[],f=[],m=[],o=[200,150];c=40;d=j(b,a,175,c,o);$("body").css("height",a);$("body").removeClass("five");$("body").removeClass("four");$("body").removeClass("three");$("body").removeClass("two");$("body").removeClass("one");d==5&&($("body").addClass("five"),
e=[b-10-5-175-5,a],f[0]=e[0],a-e[0]*s<o[1]+10?(e[1]=a-o[1]-10,l=[e[1]/s,e[1]],f=[e[0],o[1]]):(e[1]=e[0]*s,l=e,f[1]=a-e[1]-10),k.setPos(g.gradientv,[e[0],-i]),k.setPos(g.gradienth,[0,e[1]]),k.setPos(g.gradientCorner,[e[0],e[1]]),m=[175,a-c-5-30-5-30-5],k.setPos(g.board,[e[0]/2-l[0]/2,0]),k.setPos(g.graph,[5,e[1]+10+5]),k.setPos(g.title,[e[0]+10+5,0]),k.setPos(g.aboutsi,[e[0]+10+5,c]),k.setPos(g.movelist,[e[0]+10+5,c+5+30]),k.setPos(g.buttons,[e[0]+10+5,c+5+30+5+m[1]]));d==4&&($("body").addClass("four"),
l=[b-2,(b-2)*s],f=[b,a-l[1]-32-5-30-10],k.setPos(g.board,[0,32]),k.setPos(g.title,[0,0]),k.setPos(g.aboutsi,[l[0]-175-5,5]),k.setPos(g.buttons,[l[0]/2-87.5,l[1]+32]),k.setPos(g.gradienth,[0,l[1]+32+30+5]),k.setPos(g.graph,[5,l[1]+32+5+30+10+5]));d==3&&($("body").addClass("three"),l=[b,a-32-30-5],k.setPos(g.board,[0,32]),k.setPos(g.title,[0,0]),k.setPos(g.aboutsi,[l[0]-175-5,5]),k.setPos(g.buttons,[l[0]/2-87.5,l[1]+32]));d==2&&(i==0&&(c=5),$("body").addClass("two"),l=[a/s,a],f=[b-l[1]/s-10-5-175-5,
a-3],m=[175,a-c-5-30-5-30-5],k.setPos(g.board,[0,0]),k.setPos(g.gradientv,[l[1]/s,-i]),k.setPos(g.graph,[l[1]/s+15,8]),k.setPos(g.title,[l[1]/s+15+f[0],0]),k.setPos(g.aboutsi,[l[1]/s+15+f[0],c]),k.setPos(g.movelist,[l[1]/s+15+f[0],c+5+30]),k.setPos(g.buttons,[l[1]/s+15+f[0],c+5+30+5+m[1]]));d==1&&($("body").addClass("one"),i==0&&(c=5),l=[a/s,a],f=[b-l[0]-10,a-c-5-30-5-30-5],k.setPos(g.board,[0,0]),k.setPos(g.gradientv,[l[0],-i]),k.setPos(g.graph,[l[0]+10+5,5+c+5+30+5]),k.setPos(g.title,[l[0]+10+5+
f[0]/2-87.5,0]),k.setPos(g.aboutsi,[l[0]+10+5+f[0]-175-5-5,c]),k.setPos(g.movelist,[l[0]+10+5+f[0],c+5+30]),k.setPos(g.buttons,[l[0]+10+f[0]/2-87.5,c+5+30+5+f[1]]));k.setSize(g.gradientv,[10,a+i]);d==5?k.setSize(g.gradienth,[e[0],10]):k.setSize(g.gradienth,[b,10]);k.setSize(g.board,l);k.setSize(g.graph,f);a=n.sub(f,[10,10]);g.historyGraph.width=a[0];g.historyGraph.height=a[1];k.setSize(g.movelist,m);k.setSize(g.tableDiv,m);U=new oa.GraphLines(g.historyGraph);O();d!==3||l[1]/l[0]<s?(k.setPos(g.divBoard,
[l[0]/2-l[1]/2+5,5]),h(l[1]-10,i)):(k.setPos(g.divBoard,[l[0]/2-(l[0]*s-10)/2,5]),h(l[0]*s-10,i))}}function h(a,d){var p=a/575,l;D=[parseFloat(g.divBoard.style.left)+parseFloat(g.board.style.left),parseFloat(g.divBoard.style.top)+parseFloat(g.board.style.top)];d&&(D[1]+=d);q[1]=90.1*p;q[0]=90.3*p;q=[q[0],q[1]];J=11*p;K=81*p;r=35*p;V=n.mult(0.5,[r,r]);u=10*p;E=80*p;N=[E-0.5*r,0.5*u];L=[0.5*u,E-0.5*r];M=9*r+8*u;for(l=0;l<2;l++)Y[(l+1)%2]=[0,l*(q[1]+M+u),a,l*(q[1]+M+u)+E];w=[u+r,u+r];Z=35*p;Q=10*p;R=
18*p;ca=[-Q,R,Q,-R];da=[R,-Q,-R,Q];ea=Math.pow(p,2)*800/15;fa=Math.pow(p,2)*4E3/15;aa=0.5*p;var e,f;z();$(g.imgBoard).css("width",a);$(g.imgBoard).css("height",a);W();var h;l=!1;for(p=0;p<2;p++){for(e=0;e<10;e++){f="w"+p+"_"+e;for(h=0;h<pp.history.pos;h++)if(pp.history.list[h].from==f){l=h;break}l!==!1?(i.wallHome=f,b(pp.history.list[l].move,!1),pp.history.list[l].move[0]=="v"?k.setSize(g[f],[J,K]):k.setSize(g[f],[K,J]),l=!1):(k.setPos(g[f],G[f]),k.setSize(g[f],[J,K]))}k.setSize(g["p"+p+"pic"],[Z,
Z]);e=A.encode({i:pp.players[p].i,j:pp.players[p].j,wall:!1});i.pColor=p;t(e,!1)}c();p=q[0]-u;k.setPos(g.yourmove1,[p,q[1]-E-u+3]);k.setPos(g.yourmove0,[p,q[1]+M+u]);ga()}function y(a){a=n.sub(a,D);n.subFrom(a,q);var b,c=[];for(b=0;b<2;b++)c[b]=a[b]%w[b];return{i:Math.round((a[0]-c[0])/w[0]),j:Math.round((a[1]-c[1])/w[1]),k:c[1]>r?c[0]>r?3:1:c[0]>r?2:0}}function I(a){function b(a){var c=[a.i*w[0],a.j*w[1]];n.addTo(c,D,q);var P=[];a.wall=="v"&&(c[0]+=r,P[0]=c[0]+u,P[1]=c[1]+E);a.wall=="h"&&(c[1]+=
r,P[0]=c[0]+E,P[1]=c[1]+u);return c.concat(P)}var c=y(a),l=[],d,e,f,g,h=[["h",-1,-1],["h",0,-1],["h",1,-1],["h",-1,0],["h",0,0],["h",1,0],["v",-1,-1],["v",-1,0],["v",-1,1],["v",0,-1],["v",0,0],["v",0,1]];for(g=0;g<h.length;g++)e=c.i+h[g][1],f=c.j+h[g][2],d=h[g][0],e>=0&&e<=7&&f>=0&&f<=7&&(l[l.length]={i:e,j:f,wall:d});c=[a[0]-L[0],a[1]-L[1],a[0]+L[0],a[1]+E-L[1]];n.addTo(c,ca);e=[a[0]-N[0],a[1]-N[1],a[0]+E-N[0],a[1]+N[1]];n.addTo(e,da);a=[];for(g=0;g<l.length;g++)d=b(l[g]),a[g]=l[g].wall=="v"?n.area(n.rcClipToRect(c,
d)):n.area(n.rcClipToRect(e,d)),l[g].wall==i.orient&&(a[g]+=ea);var j;for(g=d=0;g<l.length;g++)a[g]>d&&a[g]>fa&&pp.isValidMove(A.encode(l[g]))&&(j=g,d=a[g]);if(j===void 0)return!1;return A.encode(l[j])}function v(a){a=n.sub(a,D);var c;if(pp.currentPlayer()===0&&n.ptInRect(a,Y[0]))c=0;else if(pp.currentPlayer()===1&&n.ptInRect(a,Y[1]))c=1;else return!1;a=Math.floor((a[0]-(q[0]-u-V[0]))/w[0]);var b="w"+c+"_"+a;for(c=0;c<pp.history.pos;c++)if(pp.history.list[c].from==b||a<0||a>9)return!1;return b}function m(a,
c,b){a!=c&&(c=="h"?k.setSize(g[i.wallHome],[K,J]):c=="v"&&k.setSize(g[i.wallHome],[J,K]),a=c);b!==void 0&&(b=a=="h"?n.sub(b,N):n.sub(b,L),n.subFrom(b,D),k.setPos(g[i.wallHome],b))}function t(a,c){var b=A.decode(a);b=n.mult([b.i,b.j],w);b=n.add(b,q);c?$(g["p"+i.pColor]).animate({left:b[0],top:b[1]},100):k.setPos(g["p"+i.pColor],b)}function b(a,c){var b=A.decode(a),d=n.mult([b.i,b.j],w);d=n.add(d,q);b.wall=="v"&&(d[0]+=r);b.wall=="h"&&(d[1]+=r);c?$(g[i.wallHome]).animate({left:d[0],top:d[1]},S):k.setPos(g[i.wallHome],
d)}function a(){if(i.valid){var a=n.sub(H,i.pos),c=Math.sqrt(n.magnitude2(a));if(i.pColor===!1)ha=c/M*100,n.addTo(i.pos,n.mult(a,0.35)),i.wall=I(i.pos),i.wall===!1?i.pos[1]<3.5*r||i.pos[1]>M+3.5*r?(m(i.orient,"v",i.pos),i.orient="v"):m(i.orient,i.orient,i.pos):(m(i.orient,i.wall[0],i.pos),i.orient=i.wall[0]);else{var b=i,d;d=y(H);d.k!==0?d=!1:(d=A.encode({i:d.i,j:d.j,wall:!1}),d=pp.isValidMove(d)?d:!1);b.pMove=d;c<=aa*ba?i.pos=n.copy(H):n.addTo(i.pos,n.mult(a,aa*ba/c));k.setPos(g["p"+i.pColor],n.sub(n.sub(i.pos,
V),D))}}}function c(){i={valid:!1,wall:!1,wallHome:!1,orient:"v",pMove:!1,pColor:!1,pos:[0,0],offset:[]}}function T(a){a.preventDefault();if(i.valid){var c=!1;a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length&&(a=a.originalEvent.touches[0],c=!0);posMouse=[a.pageX,a.pageY];if(i.pColor===!1)H=posMouse,c&&n.subFrom(H,[0,60]);else{n.subFrom(posMouse,i.offset);a=pp.players[pp.currentPlayer()];a=e(a.i,a.j);var b=n.sub(posMouse,a);c=b[0];b=b[1];var d=w[0],g,f=10,h,j=Math.atan2(-b,
c)-Math.PI/2;j>=0&&(j-=Math.PI*2);var k;for(k=0;k<pp.track.length;k++)h=Math.atan2(-pp.track[k][1],pp.track[k][0])-Math.PI/2,h>=0&&(h-=Math.PI*2),h=Math.abs(j-h),h>Math.PI&&(h=Math.PI*2-h),h<f&&(f=h,g=k);g=n.copy(pp.track[g]);g=n.mult(g,d);d=n.magnitude2(g);c=n.dotProduct(g,[c,b])/d;c<0&&(c=0);c<1&&(g=n.mult(g,c));H=n.add(g,a)}}}function e(a,c){return n.add(D,q,n.mult([a,c],w),V)}function la(a){if(B)console.log("onMouseDown called when freezeUI == true");else if(!(a.which&&a.which>1)){a.preventDefault();
a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length&&(a=a.originalEvent.touches[0]);var c=[a.pageX,a.pageY],b;B===!0?b=!1:(b=pp.players[pp.currentPlayer()],pos=e(b.i,b.j),Math.sqrt(n.distance2(c,pos))<1.5*r?(i.offset=n.sub(c,pos),b=!0):b=!1);if(F=b?"p"+pp.currentPlayer():v(c))if(F[2]=="_")H=[a.pageX,a.pageY],i.pos=n.add(G[F],L,D),i.valid=!0,i.wallHome=F,i.orient="v",F=!1,$("#"+i.wallHome).addClass("grabbing");else if(F[0]==="p"&&parseInt(F[1],10)===pp.currentPlayer())H=n.sub([a.pageX,
a.pageY],i.offset),a=pp.players[pp.currentPlayer()],i.pos=e(a.i,a.j),i.valid=!0,i.pColor=parseInt(F[1],10),F=!1,$("#p"+i.pColor).addClass("grabbing")}}function O(){var a,c='<tr><th scope="maincol"></th><th scope="col">White</th><th scope="col">Black</th></tr>',b;for(b=0;b<pp.history.list.length;b++)a=pp.history.list[b].move,c+=b<pp.history.pos?b%2===0?'<tr><th scope="row">'+(b/2+1)+". </th><td>"+a+"</td>":"<td>"+a+"</td></tr>":b%2===0?'<tr><th scope="past">'+(b/2+1)+'.</th><td scope="past">'+a+"</td>":
'<td scope="past">'+a+"</td></tr>";$(g.historyTable).html(c);$(g.moveNum).html("Move "+(Math.floor(pp.history.pos/2)+1));ia.refresh();c=[[[0,8]],[[0,8]]];var d=pp.history.pos,e=pp.history.list;for(b=0;b<2;b++)for(a=0;a<pp.history.list.length;a++)c[b][a+1]=[a+1,e[a].score[b]];U.draw(c,!0);c=[[[0,8]],[[0,8]]];for(b=0;b<2;b++)for(a=0;a<d;a++)c[b][a+1]=[a+1,e[a].score[b]];U.draw(c);if(!pp.historyCurrent()){c=d>0?[[],[]]:[[[0,8]],[[0,8]]];for(b=0;b<2;b++){d!==0&&(c[b][0]=[d,e[d-1].score[b]]);for(a=1;a<
e.length-d+1;a++)c[b][a]=[d+a,e[d+a-1].score[b]]}U.draw(c,!1,!1,"butt",1)}}function W(){if(i.valid){var a=!1;if(i.wallHome){$("#"+i.wallHome).removeClass("grabbing");if(i.wall&&ha<pa)b(i.wall,!0),pp.move(i.wall,i.wallHome,!1),a=!0;else{i.orient=="h"&&($("#"+i.wallHome).css("width",J),$("#"+i.wallHome).css("height",K),$("#"+i.wallHome).attr("src","images/wall.png"));var d=G[i.wallHome];$("#"+i.wallHome).animate({left:d[0],top:d[1]},500)}c()}i.pColor!==!1&&($("#p"+i.pColor).removeClass("grabbing"),
i.pMove?(a=pp.players[i.pColor],a=A.encode({i:a.i,j:a.j,wall:!1}),pp.move(i.pMove,a,!1),t(i.pMove,!0),a=!0):t(A.encode({i:pp.players[i.pColor].i,j:pp.players[i.pColor].j,wall:!1}),!0),d=pp.getScore(),B=pp.isGameOver(),d[0]===0?alert("White wins!"):d[1]===0&&alert("Black wins!"),c());a&&(O(),f.client.checkDoc(),f.client.username!=void 0&&(f.client.setDirty(),f.client.save()));c()}}function z(){var a,b;for(a=0;a<10;a++)b=q[0]-u+a*w[0],G["w0_"+a]=[b,q[1]+M+u],G["w1_"+a]=[b,3]}function ma(){var a="";
$("#divBoard").html(a);var b,c,d;z();for(c=0;c<2;c++)for(b=0;b<10;b++)d=G["w"+c+"_"+b],a+="<img class='wall'id='w"+c+"_"+b+"' src='images/wall.png' alt='wall' style=' top:"+d[1]+"px; left:"+d[0]+"px;'></img>";b=q[1]+8*(r+u);c=q[1];d=q[0]+4*(r+u);a+="<img class='board' id='imgBoard' src='images/board.png'alt='board'></img>";a+="<div class=divPawn id=p0><img id=p0pic class=pawn src='images/white.png'alt='WhitePawn' style=' top:"+b+"px; left:"+d+"px;'></img><div id=yourmovep0 class=yourmovep></div></div>";
a+="<div class=divPawn id=p1><img id=p1pic class=pawn src='images/black.png'alt='BlackPawn' style=' top:"+c+"px; left:"+d+"px;'></img><div id=yourmovep1 class=yourmovep></div></div>";a+="<div id=yourmove1 class=yourmove></div><div id=yourmove0 class=yourmove></div>";$("#divBoard").html(a);g=k.bindIDs()}function na(a){$(g["yourmove"+a]).animate({opacity:0},700);$(g["yourmovep"+a]).animate({opacity:0},700)}function x(){if(!B){var a=pp.history.pos%2;$(g["yourmove"+a]).animate({opacity:0.4},300,na.fnArgs(a));
$(g["yourmovep"+a]).animate({opacity:0.4},300)}}function ja(a){console.log(a+" button clicked");if(B&&!pp.isGameOver())console.log(a+" button clicked, but UI is frozen");else if(a=="back"&&pp.history.pos===0||a=="fwd"&&pp.historyCurrent())console.log(a+" button clicked, but history is at limit");else{console.log("going "+a+" from "+pp.history.pos);var b;a=="back"&&(b=pp.history.pos-1);a=="fwd"&&(b=pp.history.pos+1);B=!0;C(b,!0,function(){B=!1;O();f.client.checkDoc();f.client.username!=void 0&&(f.client.setDirty(),
f.client.save())})}}function qa(){console.log("back button clicked");ja("back")}function ra(){console.log("fwd button clicked");ja("fwd")}function C(a,b,d){i.valid&&W();O();var e,f;if(a==pp.history.pos){if(d==void 0)throw Error("setMovePos called without an fnComplete function");d();c()}else if(a<pp.history.pos){pp.changeHistoryPos(pp.history.pos-1);f=pp.history.list[pp.history.pos];if(f.move.length===4)if(i.wallHome=f.from,e=G[i.wallHome],m("h","v"),b)$(g[i.wallHome]).animate({left:e[0],top:e[1]},
S,C.fnArgs(a,b,d));else{k.setPos(g[i.wallHome],[e[0],e[1]]);C(a,b,d);return}f.move.length===2&&(f=pp.players[pp.history.pos%2],f=n.add(q,n.mult([f.i,f.j],w)),b?$(g["p"+pp.history.pos%2]).animate({left:f[0],top:f[1]},S,C.fnArgs(a,b,d)):(k.setPos(g["p"+pp.history.pos%2],f),C(a,b,d)))}else{f=pp.history.list[pp.history.pos];e=A.decode(f.move);pp.changeHistoryPos(pp.history.pos+1);if(e.wall)if(i.wallHome=f.from,m("v",f.move[0]),f=n.add(q,n.mult([e.i,e.j],w)),e.wall=="v"&&(f[0]+=r),e.wall=="h"&&(f[1]+=
r),b)$(g[i.wallHome]).animate({left:f[0],top:f[1]},S,C.fnArgs(a,b,d));else{k.setPos(g[i.wallHome],f);C(a,b,d);return}e.wall===!1&&(e=(pp.history.pos-1)%2,f=pp.players[e],f=n.add(q,n.mult([f.i,f.j],w)),b?$(g["p"+e]).animate({left:f[0],top:f[1]},S,C.fnArgs(a,b,d)):(k.setPos(g["p"+e],f),C(a,b,d)))}}function sa(){f.client.username==void 0?f.client.signIn(f.client.username):window.open("http://pageforest.com/docs/")}function ka(a){a==void 0?$("#signIn").attr("src","images/signin30.png"):$("#signIn").attr("src",
"images/mydocs30.png")}function ga(){return{readers:["public"],writers:["public"],blob:{title:"Pawn Pwn Game",version:3,game:pp.getState()}}}var ta=namespace.lookup("com.pageforest.client"),A=namespace.lookup("com.pageforest.pawnpwn"),ua=namespace.lookup("com.pageforest.move-controller"),oa=namespace.lookup("com.pageforest.graph"),n=namespace.lookup("org.startpad.vector"),k=namespace.lookup("org.startpad.dom"),X=[0,0],i={valid:!1,wall:!1,wallHome:!1,orient:"v",pMove:!1,pColor:!1,pos:[0,0],offset:[]},
F=!1,S=300,g,B=!1,U,D=[],q=[],V=[],w=[],N=[],L=[],Y=[[],[]],r,u,M,E,J,K,Z,Q,R,ca,da,ea=100,fa=600,G={},aa=0.5,ha,pa=5,s=1.37,H=[0,0],ba=50,ia;f.extend({onReady:function(){addEventListener?(ia=new iScroll("scroller"),o(),pp=new A.PawnPwnGame,pp.init(),mc=new ua.MoveController(f,pp.history),ma(),$(g.about).bind("click",function(){var a="/about.html";location.hash&&(a+=location.hash);window.open(a)}),$("#divBoard").bind("mousemove touchmove",T),$(document).bind("mouseup touchend touchcancel",W),$("#divBoard").bind("mousedown touchstart",
la),$("#back").bind("click",qa),$("#fwd").bind("click",ra),$(document).bind("touchmove",function(a){a.preventDefault()}),$(window).bind("resize",function(){setTimeout(function(){d()},0)}),setInterval(x,1E4),setInterval(a,ba),f.client=new ta.Client(f),f.client.addAppBar(),$("#pfAppBarBox").css("z-index","1002"),$("#pfAppPanel").css("z-index","1001"),$(".sign-in").click(sa),ka(f.client.username),f.client.poll(),d(),f.client.saveInterval=0,f.client.autoLoad=!0,$("body").css("background-color","#616161"),
$("h1").css("color","#ffffff"),$("#tableDiv").css("background-color","#9e9e9e")):($("body").addClass("fail"),$("body").html("You're using a really old browser!  Upgrade to <a href='http://www.mozilla.com/en-US/firefox/'>Mozilla Firefox</a>, <a href='http://www.google.com/chrome'>Google Chrome</a>, <a href='http://windows.microsoft.com/en-us/internet-explorer/products/ie/home'>Internet Explorer 9</a>.  Note that if you are using a version of Windows that is unable to use IE 9 (XP and below), you should use Chrome or Firefox because Pawn Pwn will not work on IE 8 and below."))},
getDoc:ga,setDoc:function(a){B?console.log("setDoc called when UI frozen"):(B=!0,mc.merge(a.blob.game.history,function(){B=!1;O()}));i.wallHome=""},setMovePos:C,appendMoves:function(a){pp.history.list=a.list},grabbing:i,wallHome:G,parts:g,onResize:d,onUserChange:ka})});